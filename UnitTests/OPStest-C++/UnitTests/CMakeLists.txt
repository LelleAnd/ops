
#(UnitTests - CMakeLists.txt)

add_executable(test-subscribe SubscribeDataAndTest.cpp)
add_executable(test-subscribeTCP SubscribeTCPDataAndTest.cpp)
add_executable(test-subscribeUDP SubscribeUDPDataAndTest.cpp)
add_executable(test-serialize-and-deserialize TestSerializeAndDeserialize.cpp)

if(MSVC)
elseif(MINGW)
else()
  set(GTEST_LIBRARIES "gtest ${GTEST_LIBRARIES}")
endif()

target_link_libraries(test-subscribe                 ${Boost_LIBRARIES} ${GTEST_LIBRARIES} ${CMAKE_THREAD_LIBS_INIT} ops-static)
target_link_libraries(test-subscribeTCP              ${Boost_LIBRARIES} ${GTEST_LIBRARIES} ${CMAKE_THREAD_LIBS_INIT} ops-static)
target_link_libraries(test-subscribeUDP              ${Boost_LIBRARIES} ${GTEST_LIBRARIES} ${CMAKE_THREAD_LIBS_INIT} ops-static)
target_link_libraries(test-serialize-and-deserialize ${Boost_LIBRARIES} ${GTEST_LIBRARIES} ${CMAKE_THREAD_LIBS_INIT} ops-static)

if(MSVC)
  target_link_libraries(test-subscribe Winmm)
  target_link_libraries(test-subscribeTCP Winmm)
  target_link_libraries(test-subscribeUDP Winmm)
  target_link_libraries(test-serialize-and-deserialize Winmm)
elseif(MINGW)
  target_link_libraries(test-subscribe ws2_32 mswsock)
  target_link_libraries(test-subscribeTCP ws2_32 mswsock)
  target_link_libraries(test-subscribeUDP ws2_32 mswsock)
  target_link_libraries(test-serialize-and-deserialize ws2_32 mswsock)
else()
  target_link_libraries(test-subscribe pthread rt)
  target_link_libraries(test-subscribeTCP pthread rt)
  target_link_libraries(test-subscribeUDP pthread rt)
  target_link_libraries(test-serialize-and-deserialize pthread rt)
endif()
